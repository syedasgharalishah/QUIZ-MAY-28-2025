<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS MPT Daily Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Custom CSS for animations and specific styles not easily covered by Tailwind */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA; /* Background color */
            color: #2C3E50; /* Default text color */
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        .text-primary {
            color: #2C3E50;
        }

        .date-color {
            color: #6D6875;
        }

        .gradient-button {
            background-image: linear-gradient(to right, #E6E6FA, #FFDAB9);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }

        .gradient-button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .option-card {
            transition: transform 0.2s ease-in-out, background-color 0.3s ease-in-out;
        }

        .option-card:hover {
            transform: scale(1.05);
        }

        /* Pulse animation for correct answer */
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(144, 238, 144, 0); }
            100% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0); }
        }

        .pulse-green {
            animation: pulse-green 0.6s ease-out;
            background-color: #90EE90; /* Light Green */
        }

        /* Shake animation for wrong answer */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .shake-red {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
            background-color: #FF6B6B; /* Red */
        }

        /* Progress bar animation */
        .progress-bar-inner {
            background-image: linear-gradient(to right, #20B2AA, #3EB489);
            transition: width 0.5s ease-in-out;
        }

        /* Sticky date positioning for desktop */
        .sticky-date {
            position: sticky;
            top: 1rem;
            z-index: 10;
        }

        /* Responsive adjustments for sticky date */
        @media (min-width: 768px) {
            .sticky-date {
                right: 1rem;
                left: auto;
            }
        }

        @media (max-width: 767px) {
            .sticky-date {
                left: 1rem;
                right: auto;
            }
        }

        /* Hide elements for security */
        .no-select {
            -webkit-touch-callout: none; /* iOS Safari */
            -webkit-user-select: none; /* Safari */
            -khtml-user-select: none; /* Konqueror HTML */
            -moz-user-select: none; /* Old versions of Firefox */
            -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently supported by Chrome, Edge, Opera and Firefox */
        }

        /* Modal styling */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 100; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            text-align: center;
        }

        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body class="no-select" oncontextmenu="return false;">

    <div id="login-page" class="min-h-screen flex items-center justify-center bg-[#F8F9FA] p-4">
        <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-md border border-[#FFF5EE]">
            <h2 class="text-3xl font-bold text-center text-primary mb-6">Quiz Login</h2>
            <div class="mb-4">
                <label for="username" class="block text-primary text-sm font-bold mb-2">Username:</label>
                <input type="text" id="username" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-primary leading-tight focus:outline-none focus:shadow-outline bg-gray-100" placeholder="Enter username">
            </div>
            <div class="mb-6">
                <label for="password" class="block text-primary text-sm font-bold mb-2">Password:</label>
                <input type="password" id="password" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-primary leading-tight focus:outline-none focus:shadow-outline bg-gray-100" placeholder="Enter password">
            </div>
            <button id="login-button" class="gradient-button text-white font-bold py-3 px-6 rounded-lg w-full focus:outline-none focus:shadow-outline">Login</button>
            <p id="login-error" class="text-red-500 text-center mt-4 hidden">Invalid username or password.</p>
        </div>
    </div>

    <div id="candidate-info-page" class="min-h-screen flex items-center justify-center bg-[#F8F9FA] p-4 hidden">
        <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-md border border-[#FFF5EE]">
            <h2 class="text-3xl font-bold text-center text-primary mb-6">Candidate Information</h2>
            <div class="mb-6">
                <label for="full-name" class="block text-primary text-sm font-bold mb-2">Full Name:</label>
                <input type="text" id="full-name" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-primary leading-tight focus:outline-none focus:shadow-outline bg-gray-100" placeholder="Enter your full name">
            </div>
            <button id="start-quiz-button" class="gradient-button text-white font-bold py-3 px-6 rounded-lg w-full focus:outline-none focus:shadow-outline">Start Quiz</button>
            <p id="name-error" class="text-red-500 text-center mt-4 hidden">Please enter your full name.</p>
        </div>
    </div>

    <div id="quiz-page" class="min-h-screen bg-[#F8F9FA] p-4 md:p-8 hidden">
        <div class="relative mb-6">
            <div id="live-date" class="sticky-date text-sm font-semibold date-color p-2 rounded-lg bg-white shadow-md flex items-center justify-end md:justify-start">
                <i class="far fa-calendar-alt mr-2"></i>
                <span></span>
            </div>
            <h1 class="text-4xl font-bold text-center text-primary mt-4 mb-4">CSS MPT Daily Quiz – <span id="quiz-date-title"></span></h1>

            <div class="w-full bg-gray-200 rounded-full h-4 mb-4 overflow-hidden shadow-inner">
                <div id="progress-bar" class="progress-bar-inner h-full rounded-full text-xs text-white flex items-center justify-center" style="width: 0%;">
                    <span id="progress-text">0%</span>
                </div>
            </div>

            <div class="w-full rounded-xl overflow-hidden shadow-lg mb-4">
                <img src="https://i.ibb.co/tMYHtj6n/480709804-2211254089269599-2819007219717277160-n.jpg" alt="Quiz Banner" class="w-full h-auto object-cover rounded-xl">
            </div>

            <div class="text-center text-primary text-sm md:text-base font-bold mb-6">
                <p>DAWNDIGEST</p>
                <p>PREPARED BY: SYED ASGHAR ALI SHAH Contact: 03265762698</p>
                <p>Updated on: <span id="updated-date"></span></p>
            </div>

            <div class="text-center text-lg font-bold text-primary mb-6">
                Time Remaining: <span id="timer">40:00</span>
            </div>
        </div>

        <div id="quiz-container" class="grid grid-cols-1 md:grid-cols-1 gap-6">
            <div id="question-card" class="bg-white p-6 rounded-xl shadow-lg border border-[#FFF5EE]">
                <p class="text-lg font-semibold mb-4 text-primary"><span id="question-number"></span>. <span id="question-text"></span></p>
                <div id="options-container" class="grid grid-cols-1 gap-3">
                    </div>
                <div id="explanation-container" class="mt-4 p-3 rounded-lg bg-gray-100 text-sm italic text-primary hidden">
                    <p id="explanation-text"></p>
                </div>
            </div>

            <div class="flex justify-between mt-6">
                <button id="prev-button" class="gradient-button text-white font-bold py-3 px-6 rounded-lg opacity-50 cursor-not-allowed" disabled>Previous</button>
                <button id="next-button" class="gradient-button text-white font-bold py-3 px-6 rounded-lg">Next</button>
            </div>
        </div>
    </div>

    <div id="results-page" class="min-h-screen flex items-center justify-center bg-[#F8F9FA] p-4 hidden">
        <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-md border border-[#FFF5EE] text-primary">
            <h2 class="text-3xl font-bold text-center mb-6">Quiz Results</h2>
            <p class="text-lg mb-2"><strong>Candidate Name:</strong> <span id="result-name"></span></p>
            <p class="text-lg mb-2"><strong>Total Score:</strong> <span id="result-score"></span> / 100</p>
            <p class="text-lg mb-2"><strong>Time Taken:</strong> <span id="result-time"></span></p>
            <p class="text-lg mb-4"><strong>Questions Attempted:</strong> <span id="result-attempted"></span></p>
            <button id="retake-quiz-button" class="gradient-button text-white font-bold py-3 px-6 rounded-lg w-full focus:outline-none focus:shadow-outline">Retake Quiz</button>
        </div>
    </div>

    <div id="custom-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <p id="modal-message" class="text-lg text-primary"></p>
            <button id="modal-ok-button" class="gradient-button text-white font-bold py-2 px-4 rounded-lg mt-4 hidden">OK</button>
            <button id="modal-cancel-button" class="gradient-button text-white font-bold py-2 px-4 rounded-lg mt-4 ml-2 hidden">Cancel</button>
        </div>
    </div>

    <script>
        // Disable right-click, copy/paste, and developer tools
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('keydown', event => {
            if (event.key === 'F12' ||
                (event.ctrlKey && event.shiftKey && event.key === 'I') ||
                (event.ctrlKey && event.key === 'u') ||
                (event.ctrlKey && event.key === 'U') ||
                (event.ctrlKey && event.key === 'c') ||
                (event.ctrlKey && event.key === 'C') ||
                (event.ctrlKey && event.key === 'v') ||
                (event.ctrlKey && event.key === 'V')
            ) {
                event.preventDefault();
            }
        });

        // Custom Modal Functions
        function showModal(message, type = 'alert', onConfirm = null) {
            const modal = document.getElementById('custom-modal');
            const modalMessage = document.getElementById('modal-message');
            const okButton = document.getElementById('modal-ok-button');
            const cancelButton = document.getElementById('modal-cancel-button');
            const closeButton = document.querySelector('#custom-modal .close-button');

            modalMessage.textContent = message;
            okButton.onclick = () => {
                modal.style.display = 'none';
                if (type === 'confirm' && onConfirm) {
                    onConfirm(true);
                }
            };
            cancelButton.onclick = () => {
                modal.style.display = 'none';
                if (type === 'confirm' && onConfirm) {
                    onConfirm(false);
                }
            };
            closeButton.onclick = () => modal.style.display = 'none';

            if (type === 'alert') {
                okButton.style.display = 'inline-block';
                cancelButton.style.display = 'none';
            } else if (type === 'confirm') {
                okButton.style.display = 'inline-block';
                cancelButton.style.display = 'inline-block';
            }
            modal.style.display = 'flex'; // Use flex to center
        }


        // Quiz Data and State
        let currentQuestionIndex = 0;
        let score = 0;
        let questionsAttempted = 0;
        let timerInterval;
        const quizDuration = 40 * 60; // 40 minutes in seconds
        let timeElapsed = 0;
        let userName = '';
        let quizStartTime;
        let quizCompleted = false;

        // Store answers
        const userAnswers = {}; // { questionIndex: selectedOptionIndex }

        // Curated MCQs - 100 questions (10 Easy, 50 Medium, 40 Tough)
        // Note: Difficulty is a subjective categorization by the LLM based on perceived complexity.
        // Explanations are simplified for brevity and clarity.
        const allQuizQuestions = [
            // General Knowledge (GK) - World Geography (Part 4: Important Rivers, Glaciers, Volcanoes, Highest and Lowest Points)
            {
                question: "Which is the longest river in the world?",
                options: ["Amazon", "Nile", "Yangtze", "Mississippi"],
                answer: 1,
                explanation: "The Nile River is generally considered the longest river in the world.",
                difficulty: "easy", source_page: 30
            },
            {
                question: "Mount Everest is the highest peak in which mountain range?",
                options: ["Andes", "Rockies", "Himalayas", "Alps"],
                answer: 2,
                explanation: "Mount Everest is part of the Himalayan mountain range.",
                difficulty: "easy", source_page: 31
            },
            {
                question: "Which ocean contains the Mariana Trench, the deepest known part of the world's oceans?",
                options: ["Atlantic Ocean", "Indian Ocean", "Pacific Ocean", "Arctic Ocean"],
                answer: 2,
                explanation: "The Mariana Trench is located in the western Pacific Ocean.",
                difficulty: "easy", source_page: 32
            },
            {
                question: "The Amazon River flows through which continent?",
                options: ["Africa", "Asia", "South America", "Europe"],
                answer: 2,
                explanation: "The Amazon River is primarily located in South America.",
                difficulty: "medium", source_page: 30
            },
            {
                question: "Siachen Glacier, one of the longest glaciers outside the polar regions, is located in which mountain range?",
                options: ["Hindu Kush", "Karakoram", "Pamir", "Himalayas"],
                answer: 1,
                explanation: "The Siachen Glacier is in the eastern Karakoram range in the Himalayas.",
                difficulty: "medium", source_page: 31
            },
            {
                question: "Mount Vesuvius, a famous active volcano, is located near which Italian city?",
                options: ["Rome", "Milan", "Naples", "Florence"],
                answer: 2,
                explanation: "Mount Vesuvius overlooks the Bay of Naples in Italy.",
                difficulty: "medium", source_page: 31
            },
            {
                question: "The lowest point on land in Africa, Lake Assal, is located in which country?",
                options: ["Ethiopia", "Djibouti", "Kenya", "Somalia"],
                answer: 1,
                explanation: "Lake Assal is a crater lake in central Djibouti.",
                difficulty: "medium", source_page: 32
            },
            {
                question: "Which river is known as the 'Yellow River' and is significant to Chinese civilization?",
                options: ["Yangtze River", "Mekong River", "Huang He", "Pearl River"],
                answer: 2,
                explanation: "The Huang He (Yellow River) is the second-longest river in Asia and the sixth-longest in the world.",
                difficulty: "medium", source_page: 30
            },
            {
                question: "K2, the second-highest mountain in the world, is also known as what?",
                options: ["Mount Godwin Austen", "Mount Logan", "Kangchenjunga", "Lhotse"],
                answer: 0,
                explanation: "K2 is also known as Mount Godwin Austen.",
                difficulty: "medium", source_page: 31
            },
            {
                question: "The deepest part of the Atlantic Ocean is the Puerto Rico Trench, located near which island?",
                options: ["Cuba", "Jamaica", "Hispaniola", "Puerto Rico"],
                answer: 3,
                explanation: "The Puerto Rico Trench is located on the boundary between the Caribbean Sea and the Atlantic Ocean.",
                difficulty: "medium", source_page: 32
            },
            {
                question: "Which river is often called the 'Lifeline of Pakistan'?",
                options: ["Jhelum", "Chenab", "Ravi", "Indus"],
                answer: 3,
                explanation: "The Indus River is the longest river in Pakistan and is considered its 'lifeline'.",
                difficulty: "medium", source_page: 30
            },
            {
                question: "The longest glacier in the world outside the polar regions is the Fedchenko Glacier, located in which country?",
                options: ["Nepal", "Tajikistan", "Pakistan", "China"],
                answer: 1,
                explanation: "The Fedchenko Glacier is a large glacier in the Pamir Mountains of Tajikistan.",
                difficulty: "medium", source_page: 31
            },
            {
                question: "Mount Fuji is the highest peak in which country?",
                options: ["South Korea", "Japan", "China", "Vietnam"],
                answer: 1,
                explanation: "Mount Fuji is Japan's highest mountain.",
                difficulty: "medium", source_page: 31
            },
            {
                question: "The longest river in Asia is the Yangtze, flowing entirely within which country?",
                options: ["India", "Russia", "China", "Vietnam"],
                answer: 2,
                explanation: "The Yangtze River is the longest river in Asia and the third-longest in the world, flowing entirely within China.",
                difficulty: "tough", source_page: 30
            },
            {
                question: "Perito Moreno Glacier, a major tourist attraction, is located in which South American country?",
                options: ["Chile", "Argentina", "Bolivia", "Peru"],
                answer: 1,
                explanation: "The Perito Moreno Glacier is located in Los Glaciares National Park in southwest Santa Cruz Province, Argentina.",
                difficulty: "tough", source_page: 31
            },
            {
                question: "Krakatoa is a volcano located in the 'Ring of Fire' in which country?",
                options: ["Philippines", "Japan", "Indonesia", "New Zealand"],
                answer: 2,
                explanation: "Krakatoa is an active stratovolcano in Indonesia.",
                difficulty: "tough", source_page: 31
            },
            {
                question: "The lowest point in North America is Death Valley, located in which US state?",
                options: ["Arizona", "Nevada", "California", "Utah"],
                answer: 2,
                explanation: "Death Valley is a desert valley in Eastern California.",
                difficulty: "tough", source_page: 32
            },
            {
                question: "Which river forms a significant part of the border between the USA and Mexico?",
                options: ["Colorado River", "Rio Grande", "Columbia River", "Mississippi River"],
                answer: 1,
                explanation: "The Rio Grande forms a large section of the border between the United States and Mexico.",
                difficulty: "tough", source_page: 30
            },
            {
                question: "The Lambert Glacier, one of the largest glaciers in the world, is located in which continent?",
                options: ["Asia", "North America", "Antarctica", "Europe"],
                answer: 2,
                explanation: "The Lambert Glacier is a major glacier in East Antarctica.",
                difficulty: "tough", source_page: 31
            },
            {
                question: "Mount Etna is an active volcano located on which island?",
                options: ["Crete", "Cyprus", "Sicily", "Sardinia"],
                answer: 2,
                explanation: "Mount Etna is an active stratovolcano on the east coast of Sicily, Italy.",
                difficulty: "tough", source_page: 31
            },
            {
                question: "The lowest point in South America is Laguna del Carbón, located in which country?",
                options: ["Chile", "Brazil", "Argentina", "Peru"],
                answer: 2,
                explanation: "Laguna del Carbón is the lowest point in Argentina and the Americas.",
                difficulty: "tough", source_page: 32
            },
            {
                question: "Which river is the longest in North America (considering the Mississippi-Missouri river system)?",
                options: ["Mackenzie River", "Yukon River", "Mississippi River", "Missouri River"],
                answer: 2,
                explanation: "The Mississippi-Missouri river system is the longest river system in North America.",
                difficulty: "tough", source_page: 30
            },
            {
                question: "The Vatnajökull glacier, the largest glacier in Europe by area, is located in which country?",
                options: ["Norway", "Sweden", "Iceland", "Finland"],
                answer: 2,
                explanation: "Vatnajökull is the largest and most voluminous ice cap in Iceland.",
                difficulty: "tough", source_page: 31
            },
            {
                question: "Mauna Loa, one of the world's most active volcanoes, is located in which US state?",
                options: ["Alaska", "California", "Hawaii", "Washington"],
                answer: 2,
                explanation: "Mauna Loa is one of five volcanoes that form the Island of Hawaii.",
                difficulty: "tough", source_page: 31
            },
            {
                question: "The lowest point in Europe is the Caspian Depression, located in which country (or countries)?",
                options: ["Germany", "France", "Russia/Kazakhstan", "Ukraine"],
                answer: 2,
                explanation: "The Caspian Depression is a low-lying flatland region around the northern part of the Caspian Sea, spanning Russia and Kazakhstan.",
                difficulty: "tough", source_page: 32
            },
            {
                question: "Which river flows through Paris, France?",
                options: ["Rhine River", "Loire River", "Seine River", "Garonne River"],
                answer: 2,
                explanation: "The Seine River is a 777-kilometre-long river and an important commercial waterway within the Paris Basin.",
                difficulty: "tough", source_page: 30
            },
            {
                question: "The Aletsch Glacier, the largest glacier in the Alps, is in which country?",
                options: ["Austria", "Italy", "France", "Switzerland"],
                answer: 3,
                explanation: "The Aletsch Glacier is the largest glacier in the Alps, located in Switzerland.",
                difficulty: "tough", source_page: 31
            },
            {
                question: "Mount Kilimanjaro, Africa's highest peak, is a dormant volcano located in which country?",
                options: ["Kenya", "Uganda", "Tanzania", "Rwanda"],
                answer: 2,
                explanation: "Mount Kilimanjaro is a dormant volcano in Tanzania.",
                difficulty: "tough", source_page: 31
            },
            {
                question: "The lowest point in Asia is the Dead Sea, bordering Israel, Palestine, and which other country?",
                options: ["Syria", "Lebanon", "Jordan", "Egypt"],
                answer: 2,
                explanation: "The Dead Sea borders Jordan to the east and Israel and the West Bank to the west.",
                difficulty: "tough", source_page: 32
            },
            {
                question: "Which river is the longest in Australia?",
                options: ["Darling River", "Murray River", "Lachlan River", "Murrumbidgee River"],
                answer: 1,
                explanation: "The Murray River is Australia's longest river.",
                difficulty: "tough", source_page: 30
            },
            {
                question: "The Franz Josef Glacier is a famous glacier located in which country?",
                options: ["Canada", "USA", "New Zealand", "Argentina"],
                answer: 2,
                explanation: "The Franz Josef Glacier is located in Westland Tai Poutini National Park on the West Coast of New Zealand's South Island.",
                difficulty: "tough", source_page: 31
            },
            {
                question: "Mount Pinatubo, known for its large eruption in 1991, is located in which country?",
                options: ["Indonesia", "Philippines", "Japan", "Mexico"],
                answer: 1,
                explanation: "Mount Pinatubo is an active stratovolcano in the Cabusilan Mountains on the island of Luzon, near the tripoint of the Philippine provinces of Zambales, Tarlac, and Pampanga.",
                difficulty: "tough", source_page: 31
            },
            {
                question: "The lowest point in Australia is Lake Eyre, located in which state?",
                options: ["Western Australia", "Queensland", "South Australia", "New South Wales"],
                answer: 2,
                explanation: "Lake Eyre is a large, ephemeral salt lake in the Far North region of South Australia.",
                difficulty: "tough", source_page: 32
            },
            {
                question: "The highest point in Africa is Mount Kilimanjaro, located in which country?",
                options: ["Kenya", "Uganda", "Tanzania", "Ethiopia"],
                answer: 2,
                explanation: "Mount Kilimanjaro is the highest mountain in Africa and the highest single free-standing mountain in the world, located in Tanzania.",
                difficulty: "tough", source_page: 31
            },
            {
                question: "The highest point in South America is Aconcagua, located in which country?",
                options: ["Chile", "Peru", "Argentina", "Bolivia"],
                answer: 2,
                explanation: "Aconcagua is the highest mountain in the Americas and the highest peak outside of Asia, located in the Andes mountains in Mendoza Province, Argentina.",
                difficulty: "tough", source_page: 31
            },

            // English (Fill in the Blanks with Suitable/Appropriate Prepositions)
            {
                question: "She arrived ______ the station.",
                options: ["in", "at", "on", "to"],
                answer: 1,
                explanation: "'Arrive at' is used for specific, smaller places like a station.",
                difficulty: "easy", source_page: 432
            },
            {
                question: "The cat is sitting ______ the chair.",
                options: ["in", "at", "on", "under"],
                answer: 2,
                explanation: "'On' is used for objects resting on a surface.",
                difficulty: "easy", source_page: 432
            },
            {
                question: "He is listening ______ music.",
                options: ["at", "to", "for", "with"],
                answer: 1,
                explanation: "'Listen to' is the correct phrasal verb.",
                difficulty: "easy", source_page: 432
            },
            {
                question: "I am interested ______ learning new languages.",
                options: ["on", "at", "in", "about"],
                answer: 2,
                explanation: "'Interested in' is the correct prepositional phrase.",
                difficulty: "medium", source_page: 432
            },
            {
                question: "She is good ______ mathematics.",
                options: ["in", "at", "on", "with"],
                answer: 1,
                explanation: "'Good at' is used to express proficiency in a subject or skill.",
                difficulty: "medium", source_page: 432
            },
            {
                question: "He is afraid ______ spiders.",
                options: ["from", "of", "with", "by"],
                answer: 1,
                explanation: "'Afraid of' is the correct idiom.",
                difficulty: "medium", source_page: 432
            },
            {
                question: "The book belongs ______ me.",
                options: ["for", "to", "with", "of"],
                answer: 1,
                explanation: "'Belong to' indicates possession.",
                difficulty: "medium", source_page: 432
            },
            {
                question: "She is fond ______ chocolates.",
                options: ["for", "of", "about", "with"],
                answer: 1,
                explanation: "'Fond of' means having a liking or affection for something.",
                difficulty: "medium", source_page: 432
            },
            {
                question: "He is addicted ______ gambling.",
                options: ["in", "to", "on", "with"],
                answer: 1,
                explanation: "'Addicted to' is the correct phrase for a strong habit.",
                difficulty: "medium", source_page: 432
            },
            {
                question: "I agree ______ your proposal.",
                options: ["with", "on", "to", "about"],
                answer: 2,
                explanation: "'Agree to' is used when agreeing to a plan, proposal, or idea.",
                difficulty: "medium", source_page: 432
            },
            {
                question: "He suffers ______ a rare disease.",
                options: ["with", "of", "from", "by"],
                answer: 2,
                explanation: "'Suffer from' is used for illnesses or conditions.",
                difficulty: "medium", source_page: 432
            },
            {
                question: "She is accustomed ______ the cold weather.",
                options: ["with", "by", "for", "to"],
                answer: 3,
                explanation: "'Accustomed to' means familiar with something through experience.",
                difficulty: "medium", source_page: 432
            },
            {
                question: "He is responsible ______ the success of the project.",
                options: ["to", "of", "with", "for"],
                answer: 3,
                explanation: "'Responsible for' means accountable for something.",
                difficulty: "medium", source_page: 432
            },
            {
                question: "She complained ______ the noise.",
                options: ["to", "at", "for", "about"],
                answer: 3,
                explanation: "'Complain about' is used when complaining about a thing or situation.",
                difficulty: "medium", source_page: 432
            },
            {
                question: "He is angry ______ his brother.",
                options: ["at", "for", "about", "with"],
                answer: 3,
                explanation: "'Angry with' is used when angry at a person.",
                difficulty: "medium", source_page: 432
            },
            {
                question: "Beware ______ dogs.",
                options: ["from", "about", "with", "of"],
                answer: 3,
                explanation: "'Beware of' means to be careful about a potential danger.",
                difficulty: "medium", source_page: 432
            },
            {
                question: "He is grateful ______ your kindness.",
                options: ["to", "about", "with", "for"],
                answer: 3,
                explanation: "'Grateful for' is used to express gratitude for something received.",
                difficulty: "medium", source_page: 432
            },
            {
                question: "She is married ______ a lawyer.",
                options: ["with", "by", "for", "to"],
                answer: 3,
                explanation: "'Married to' is the correct preposition.",
                difficulty: "medium", source_page: 433
            },
            {
                question: "He was accused ______ cheating.",
                options: ["for", "with", "by", "of"],
                answer: 3,
                explanation: "'Accused of' is the correct phrase for being charged with an offense.",
                difficulty: "medium", source_page: 433
            },
            {
                question: "She is confident ______ winning the race.",
                options: ["in", "about", "with", "of"],
                answer: 3,
                explanation: "'Confident of' is used to express certainty about an outcome.",
                difficulty: "medium", source_page: 433
            },
            {
                question: "He abstained ______ voting.",
                options: ["in", "on", "with", "from"],
                answer: 3,
                explanation: "'Abstain from' means to refrain from doing something.",
                difficulty: "tough", source_page: 433
            },
            {
                question: "The new rules will come ______ force next month.",
                options: ["in", "to", "on", "into"],
                answer: 3,
                explanation: "'Come into force' means to become operational or effective.",
                difficulty: "tough", source_page: 433
            },
            {
                question: "He is absorbed ______ his thoughts.",
                options: ["on", "at", "with", "in"],
                answer: 3,
                explanation: "'Absorbed in' means fully engrossed or occupied with something.",
                difficulty: "tough", source_page: 433
            },
            {
                question: "She is anxious ______ her future.",
                options: ["for", "of", "with", "about"],
                answer: 3,
                explanation: "'Anxious about' is used when worried or concerned about something.",
                difficulty: "tough", source_page: 433
            },
            {
                question: "He was acquitted ______ all charges.",
                options: ["from", "for", "with", "of"],
                answer: 3,
                explanation: "'Acquitted of' means declared not guilty of an accusation.",
                difficulty: "tough", source_page: 433
            },
            {
                question: "She is capable ______ handling the pressure.",
                options: ["in", "for", "with", "of"],
                answer: 3,
                explanation: "'Capable of' means having the ability or quality to do something.",
                difficulty: "tough", source_page: 433
            },
            {
                question: "He complained ______ the manager ______ the poor service.",
                options: ["about, to", "at, for", "with, on", "to, about"],
                answer: 3,
                explanation: "'Complain to' a person and 'complain about' a thing/situation.",
                difficulty: "tough", source_page: 433
            },
            {
                question: "He is conversant ______ several languages.",
                options: ["in", "about", "of", "with"],
                answer: 3,
                explanation: "'Conversant with' means familiar with or knowledgeable about something.",
                difficulty: "tough", source_page: 433
            },
            {
                question: "The judge presided ______ the meeting.",
                options: ["on", "at", "in", "over"],
                answer: 3,
                explanation: "'Preside over' means to be in charge of a meeting, ceremony, or trial.",
                difficulty: "tough", source_page: 433
            },
            {
                question: "She is endowed ______ great beauty.",
                options: ["by", "in", "of", "with"],
                answer: 3,
                explanation: "'Endowed with' means provided with a quality, ability, or asset.",
                difficulty: "tough", source_page: 433
            },
            {
                question: "He is indulgent ______ his grandchildren.",
                options: ["to", "of", "with", "towards"],
                answer: 3,
                explanation: "'Indulgent towards' means having a readiness to allow someone to have or do whatever they want.",
                difficulty: "tough", source_page: 434
            },
            {
                question: "The police inquired ______ the missing documents.",
                options: ["about", "of", "for", "into"],
                answer: 3,
                explanation: "'Inquire into' means to investigate or examine something.",
                difficulty: "tough", source_page: 434
            },
            {
                question: "He is oblivious ______ his surroundings.",
                options: ["to", "about", "from", "of"],
                answer: 3,
                explanation: "'Oblivious of' or 'oblivious to' means not aware of or not concerned about what is happening around one.",
                difficulty: "tough", source_page: 434
            },
            {
                question: "She is proficient ______ playing the piano.",
                options: ["at", "with", "on", "in"],
                answer: 3,
                explanation: "'Proficient in' is used for languages, subjects, or skills.",
                difficulty: "tough", source_page: 434
            },
            {
                question: "He is susceptible ______ colds.",
                options: ["of", "from", "with", "to"],
                answer: 3,
                explanation: "'Susceptible to' means easily influenced or harmed by something.",
                difficulty: "tough", source_page: 434
            },
            {
                question: "He is vexed ______ his subordinate's inefficiency.",
                options: ["with", "by", "about", "at"],
                answer: 3,
                explanation: "'Vexed at' is used when annoyed at a situation or thing.",
                difficulty: "tough", source_page: 434
            },
            {
                question: "The river abounds ______ fish.",
                options: ["with", "from", "of", "in"],
                answer: 3,
                explanation: "'Abound in' or 'abound with' means to be plentiful in something.",
                difficulty: "tough", source_page: 434
            },
            {
                question: "He is amenable ______ suggestion.",
                options: ["with", "for", "of", "to"],
                answer: 3,
                explanation: "'Amenable to' means open and responsive to suggestion; easily persuaded or controlled.",
                difficulty: "tough", source_page: 434
            },
            {
                question: "She is cognizant ______ the consequences.",
                options: ["about", "with", "in", "of"],
                answer: 3,
                explanation: "'Cognizant of' means having knowledge or being aware of.",
                difficulty: "tough", source_page: 434
            },
            {
                question: "He is imbued ______ a sense of patriotism.",
                options: ["in", "by", "from", "with"],
                answer: 3,
                explanation: "'Imbued with' means deeply inspired by a feeling or quality.",
                difficulty: "tough", source_page: 435
            },
            {
                question: "The responsibility is incumbent ______ him.",
                options: ["upon", "to", "for", "on"],
                answer: 3,
                explanation: "'Incumbent on/upon' means necessary for (someone) as a duty or responsibility.",
                difficulty: "tough", source_page: 435
            },
            {
                question: "He is partial ______ sweet dishes.",
                options: ["towards", "for", "with", "to"],
                answer: 3,
                explanation: "'Partial to' means having a strong liking for something or someone.",
                difficulty: "tough", source_page: 435
            },
            {
                question: "The room is replete ______ books.",
                options: ["in", "of", "by", "with"],
                answer: 3,
                explanation: "'Replete with' means filled or well-supplied with something.",
                difficulty: "tough", source_page: 435
            },
            {
                question: "He is senior ______ me by two years.",
                options: ["than", "from", "over", "to"],
                answer: 3,
                explanation: "'Senior to' is the correct comparative phrase.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "She is good ______ playing chess.",
                options: ["in", "on", "with", "at"],
                answer: 3,
                explanation: "'Good at' is used for skills.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "He is suffering ______ fever.",
                options: ["with", "of", "by", "from"],
                answer: 3,
                explanation: "'Suffering from' is used for illnesses.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "I congratulated him ______ his success.",
                options: ["for", "about", "with", "on"],
                answer: 3,
                explanation: "'Congratulate on' is the correct phrase.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "She is addicted ______ coffee.",
                options: ["in", "on", "with", "to"],
                answer: 3,
                explanation: "'Addicted to' means having a strong habit or dependence.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "He is angry ______ what you said.",
                options: ["with", "at", "for", "about"],
                answer: 3,
                explanation: "'Angry about' is used when angry about a situation or thing.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "She is afraid ______ heights.",
                options: ["from", "with", "by", "of"],
                answer: 3,
                explanation: "'Afraid of' is the correct idiom.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "He is busy ______ his work.",
                options: ["in", "at", "on", "with"],
                answer: 3,
                explanation: "'Busy with' is used to describe being occupied with a task.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "She is confident ______ her abilities.",
                options: ["in", "about", "with", "of"],
                answer: 3,
                explanation: "'Confident of' is used to express certainty about one's abilities.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "He is keen ______ learning new things.",
                options: ["in", "about", "for", "on"],
                answer: 3,
                explanation: "'Keen on' means enthusiastic about something.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "She is proud ______ her achievements.",
                options: ["for", "about", "with", "of"],
                answer: 3,
                explanation: "'Proud of' is the correct phrase.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "He is responsible ______ his family.",
                options: ["to", "of", "with", "for"],
                answer: 3,
                explanation: "'Responsible for' means being accountable for someone or something.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "He is interested ______ politics.",
                options: ["on", "at", "about", "in"],
                answer: 3,
                explanation: "'Interested in' is the correct phrase.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "She is annoyed ______ his behavior.",
                options: ["at", "by", "about", "with"],
                answer: 3,
                explanation: "'Annoyed with' is used when annoyed at a person.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "He was born ______ a poor family.",
                options: ["in", "of", "from", "into"],
                answer: 3,
                explanation: "'Born into' is used for circumstances or families.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "He is capable ______ solving this problem.",
                options: ["in", "for", "with", "of"],
                answer: 3,
                explanation: "'Capable of' is used to express ability.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "She complained ______ the noise.",
                options: ["to", "at", "for", "about"],
                answer: 3,
                explanation: "'Complain about' is used when complaining about a thing or situation.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "He is familiar ______ this software.",
                options: ["to", "about", "of", "with"],
                answer: 3,
                explanation: "'Familiar with' means having knowledge or experience of something.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "He is known ______ his honesty.",
                options: ["as", "by", "of", "for"],
                answer: 3,
                explanation: "'Known for' is used to describe a distinguishing quality.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "She was surprised ______ his sudden arrival.",
                options: ["by", "with", "on", "at"],
                answer: 3,
                explanation: "'Surprised at' is the correct idiom.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "He is engaged ______ a new project.",
                options: ["on", "with", "to", "in"],
                answer: 3,
                explanation: "'Engaged in' means involved in an activity.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "The dog jumped ______ the table.",
                options: ["on", "over", "at", "onto"],
                answer: 3,
                explanation: "'Onto' indicates movement to a surface.",
                difficulty: "medium", source_page: 435
            },
            {
                question: "He is popular ______ his students.",
                options: ["among", "to", "by", "with"],
                answer: 3,
                explanation: "'Popular with' is used to describe being liked by a group.",
                difficulty: "medium", source_page: 435
            },


            // General Abilities (Problems on Ages)
            {
                question: "Ahmad is 10 years old. His father is 3 times his age. How old is his father?",
                options: ["20", "25", "30", "35"],
                answer: 2,
                explanation: "Father's age = 3 * Ahmad's age = 3 * 10 = 30 years.",
                difficulty: "easy", source_page: 519
            },
            {
                question: "If Maria is 15 years old and her brother is 5 years younger, how old is her brother?",
                options: ["8", "10", "12", "13"],
                answer: 1,
                explanation: "Brother's age = Maria's age - 5 = 15 - 5 = 10 years.",
                difficulty: "easy", source_page: 519
            },
            {
                question: "The sum of the ages of two friends is 20. If one is 8 years old, how old is the other?",
                options: ["10", "11", "12", "13"],
                answer: 2,
                explanation: "Other friend's age = 20 - 8 = 12 years.",
                difficulty: "easy", source_page: 519
            },
            {
                question: "The present age of a father is three times the age of his son. After 10 years, the father's age will be twice the age of his son. What is the present age of the father?",
                options: ["20 years", "25 years", "30 years", "35 years"],
                answer: 2,
                explanation: "Let son's age be x. Father's age = 3x. After 10 years, son's age = x+10, father's age = 3x+10. So, 3x+10 = 2(x+10) => 3x+10 = 2x+20 => x=10. Father's present age = 3*10 = 30 years.",
                difficulty: "medium", source_page: 519
            },
            {
                question: "The ratio of the ages of A and B is 3:5. If the sum of their ages is 40, what is the age of B?",
                options: ["15 years", "20 years", "25 years", "30 years"],
                answer: 2,
                explanation: "Let ages be 3x and 5x. 3x+5x=40 => 8x=40 => x=5. Age of B = 5x = 5*5 = 25 years.",
                difficulty: "medium", source_page: 519
            },
            {
                question: "Ten years ago, the age of A was half the age of B. If the ratio of their present ages is 3:4, what is the sum of their present ages?",
                options: ["30 years", "35 years", "40 years", "45 years"],
                answer: 1,
                explanation: "Present ages: A=3x, B=4x. 10 years ago: A=3x-10, B=4x-10. (3x-10) = 1/2(4x-10) => 6x-20 = 4x-10 => 2x=10 => x=5. Present ages: A=15, B=20. Sum = 35 years.",
                difficulty: "medium", source_page: 519
            },
            {
                question: "The age of a mother is twice the age of her daughter. If 20 years ago, the mother's age was four times the daughter's age, what is the present age of the daughter?",
                options: ["20 years", "25 years", "30 years", "35 years"],
                answer: 2,
                explanation: "Let daughter's age be x. Mother's age = 2x. 20 years ago: Daughter=x-20, Mother=2x-20. 2x-20 = 4(x-20) => 2x-20 = 4x-80 => 2x=60 => x=30. Daughter's present age = 30 years.",
                difficulty: "medium", source_page: 519
            },
            {
                question: "The sum of the ages of 5 children born at intervals of 3 years each is 50 years. What is the age of the youngest child?",
                options: ["4 years", "5 years", "6 years", "7 years"],
                answer: 0,
                explanation: "Let the ages be x, x+3, x+6, x+9, x+12. Sum = 5x + 30 = 50 => 5x = 20 => x = 4 years.",
                difficulty: "tough", source_page: 519
            },
            {
                question: "A father's age is 5 times his son's age. Four years ago, the father's age was 9 times his son's age. What are their present ages?",
                options: ["Son: 6, Father: 30", "Son: 7, Father: 35", "Son: 8, Father: 40", "Son: 9, Father: 45"],
                answer: 2,
                explanation: "Let son's age be x, father's age = 5x. 4 years ago: son = x-4, father = 5x-4. 5x-4 = 9(x-4) => 5x-4 = 9x-36 => 4x=32 => x=8. Son: 8, Father: 40.",
                difficulty: "tough", source_page: 519
            },
            {
                question: "The ratio of the ages of two persons is 4:7 and one is 15 years older than the other. What is the age of the younger person?",
                options: ["15 years", "20 years", "25 years", "30 years"],
                answer: 1,
                explanation: "Let ages be 4x and 7x. 7x - 4x = 15 => 3x=15 => x=5. Younger person's age = 4x = 4*5 = 20 years.",
                difficulty: "tough", source_page: 519
            },
            {
                question: "The age of a man is 24 years more than his son. In two years, his age will be twice the age of his son. What is the present age of the son?",
                options: ["20 years", "22 years", "24 years", "26 years"],
                answer: 1,
                explanation: "Let son's age be x. Man's age = x+24. In 2 years: son = x+2, man = x+26. x+26 = 2(x+2) => x+26 = 2x+4 => x=22. Son's present age = 22 years.",
                difficulty: "tough", source_page: 519
            },
            {
                question: "If 6 years are subtracted from the present age of A and the remainder is divided by 18, then the present age of B is obtained. If B is 2 years younger than C whose age is 4 years, then find the age of A.",
                options: ["36 years", "40 years", "42 years", "48 years"],
                answer: 2,
                explanation: "C's age = 4. B's age = 4-2 = 2. (A-6)/18 = 2 => A-6 = 36 => A = 42 years.",
                difficulty: "tough", source_page: 519
            },
            {
                question: "The sum of the ages of a father and his son is 45 years. Five years ago, the product of their ages was 4 times the father's then age. What are their present ages?",
                options: ["Father: 30, Son: 15", "Father: 32, Son: 13", "Father: 36, Son: 9", "Father: 40, Son: 5"],
                answer: 2,
                explanation: "Let father's age be F, son's age be S. F+S=45. 5 years ago: (F-5)(S-5) = 4(F-5). Since F-5 cannot be 0 (father is alive), S-5=4 => S=9. F=45-9=36. Father: 36, Son: 9.",
                difficulty: "tough", source_page: 520
            },
            {
                question: "A man is 3 times older than his son. 15 years ago, the man was 6 times older than his son. Find the present age of the son.",
                options: ["18 years", "20 years", "22 years", "25 years"],
                answer: 3,
                explanation: "Let son's age be x, man's age = 3x. 15 years ago: son = x-15, man = 3x-15. 3x-15 = 6(x-15) => 3x-15 = 6x-90 => 3x=75 => x=25. Son's present age = 25 years.",
                difficulty: "tough", source_page: 520
            },
            {
                question: "The ratio of the present ages of A and B is 4:5. After 8 years, the ratio of their ages will be 5:6. Find the present age of A.",
                options: ["24 years", "28 years", "32 years", "36 years"],
                answer: 2,
                explanation: "Let present ages be 4x and 5x. After 8 years: (4x+8)/(5x+8) = 5/6 => 6(4x+8) = 5(5x+8) => 24x+48 = 25x+40 => x=8. Present age of A = 4x = 4*8 = 32 years.",
                difficulty: "tough", source_page: 520
            },
            {
                question: "The age of a father is 4 times that of his son. 5 years ago, the father's age was 7 times that of his son. Find their present ages.",
                options: ["Son: 8, Father: 32", "Son: 9, Father: 36", "Son: 10, Father: 40", "Son: 12, Father: 48"],
                answer: 2,
                explanation: "Let son's age be x, father's age = 4x. 5 years ago: son = x-5, father = 4x-5. 4x-5 = 7(x-5) => 4x-5 = 7x-35 => 3x=30 => x=10. Son: 10, Father: 40.",
                difficulty: "tough", source_page: 520
            },
            {
                question: "The sum of the ages of a mother and her daughter is 60 years. 10 years ago, the mother's age was 4 times the daughter's age. What is the present age of the daughter?",
                options: ["15 years", "18 years", "20 years", "22 years"],
                answer: 1,
                explanation: "Let daughter's age be x, mother's age = 60-x. 10 years ago: daughter = x-10, mother = 50-x. 50-x = 4(x-10) => 50-x = 4x-40 => 5x=90 => x=18. Daughter's present age = 18 years.",
                difficulty: "tough", source_page: 520
            },
            {
                question: "The average age of 30 students and a teacher is 15 years. If the teacher's age is excluded, the average age decreases by 1 year. What is the teacher's age?",
                options: ["40 years", "42 years", "45 years", "48 years"],
                answer: 2,
                explanation: "Total age of 30 students + teacher = 31 * 15 = 465. Total age of 30 students = 30 * 14 = 420. Teacher's age = 465 - 420 = 45 years.",
                difficulty: "tough", source_page: 520
            },
            {
                question: "The ratio of the ages of two brothers is 2:3. If the sum of their ages is 25, what is the age of the elder brother?",
                options: ["10 years", "12 years", "15 years", "18 years"],
                answer: 2,
                explanation: "Let ages be 2x and 3x. 2x+3x=25 => 5x=25 => x=5. Elder brother's age = 3x = 3*5 = 15 years.",
                difficulty: "medium", source_page: 520
            },
            {
                question: "The age of a person is 3 times the age of his friend. If after 5 years, the sum of their ages will be 50, what is the present age of the person?",
                options: ["25 years", "30 years", "35 years", "40 years"],
                answer: 1,
                explanation: "Let friend's age be x. Person's age = 3x. After 5 years: (x+5) + (3x+5) = 50 => 4x+10=50 => 4x=40 => x=10. Person's present age = 3*10 = 30 years.",
                difficulty: "medium", source_page: 520
            },
            {
                question: "The average age of 10 students is 15 years. If a new student joins, the average age becomes 16 years. What is the age of the new student?",
                options: ["20 years", "22 years", "24 years", "26 years"],
                answer: 3,
                explanation: "Total age of 10 students = 10 * 15 = 150. Total age of 11 students (with new) = 11 * 16 = 176. Age of new student = 176 - 150 = 26 years.",
                difficulty: "medium", source_page: 520
            },
            {
                question: "The ratio of the ages of A and B is 3:4. If A is 6 years younger than B, what is the sum of their ages?",
                options: ["30 years", "36 years", "42 years", "48 years"],
                answer: 2,
                explanation: "Let ages be 3x and 4x. 4x - 3x = 6 => x=6. A=18, B=24. Sum = 18+24 = 42 years.",
                difficulty: "medium", source_page: 520
            },
            {
                question: "A man is 25 years older than his son. In 5 years, the man's age will be twice his son's age. What is the son's present age?",
                options: ["15 years", "18 years", "20 years", "22 years"],
                answer: 2,
                explanation: "Let son's age be x. Man's age = x+25. In 5 years: son = x+5, man = x+30. x+30 = 2(x+5) => x+30 = 2x+10 => x=20. Son's present age = 20 years.",
                difficulty: "medium", source_page: 520
            },
            {
                question: "The average age of 5 boys is 12 years. If a new boy joins, the average age becomes 13 years. What is the age of the new boy?",
                options: ["15 years", "16 years", "17 years", "18 years"],
                answer: 3,
                explanation: "Total age of 5 boys = 5 * 12 = 60. Total age of 6 boys = 6 * 13 = 78. Age of new boy = 78 - 60 = 18 years.",
                difficulty: "medium", source_page: 520
            },
            {
                question: "The ratio of the ages of two persons is 5:6. If 5 years ago, the ratio was 4:5, what is their present age?",
                options: ["20, 24", "25, 30", "30, 36", "35, 42"],
                answer: 1,
                explanation: "Let present ages be 5x and 6x. 5 years ago: (5x-5)/(6x-5) = 4/5 => 5(5x-5) = 4(6x-5) => 25x-25 = 24x-20 => x=5. Present ages: 5*5=25, 6*5=30.",
                difficulty: "tough", source_page: 520
            },
            {
                question: "A father's age is 3 times his son's age. If their combined age is 48, what is the son's age?",
                options: ["10 years", "12 years", "14 years", "16 years"],
                answer: 1,
                explanation: "Let son's age be x. Father's age = 3x. x + 3x = 48 => 4x = 48 => x = 12. Son's age is 12 years.",
                difficulty: "medium", source_page: 520
            },
            {
                question: "The sum of the ages of A and B is 30. If A is 4 years older than B, what is B's age?",
                options: ["11 years", "13 years", "15 years", "17 years"],
                answer: 1,
                explanation: "Let B's age be x. A's age = x+4. (x+4) + x = 30 => 2x+4 = 30 => 2x=26 => x=13. B's age is 13 years.",
                difficulty: "medium", source_page: 520
            },
            {
                question: "The average age of 20 students is 16 years. If the teacher's age is added, the average age becomes 17 years. What is the teacher's age?",
                options: ["35 years", "37 years", "39 years", "41 years"],
                answer: 3,
                explanation: "Total age of 20 students = 20 * 16 = 320. Total age of 21 (students+teacher) = 21 * 17 = 357. Teacher's age = 357 - 320 = 37 years.",
                difficulty: "tough", source_page: 520
            },
            {
                question: "The ratio of the ages of two sisters is 2:5. If the difference in their ages is 15 years, what is the age of the younger sister?",
                options: ["8 years", "10 years", "12 years", "15 years"],
                answer: 1,
                explanation: "Let ages be 2x and 5x. 5x - 2x = 15 => 3x = 15 => x = 5. Younger sister's age = 2x = 2*5 = 10 years.",
                difficulty: "medium", source_page: 520
            },
            {
                question: "A mother is 30 years older than her son. In 10 years, the mother will be twice as old as her son. What is the son's present age?",
                options: ["18 years", "20 years", "22 years", "25 years"],
                answer: 1,
                explanation: "Let son's age be x. Mother's age = x+30. In 10 years: son = x+10, mother = x+40. x+40 = 2(x+10) => x+40 = 2x+20 => x=20. Son's present age = 20 years.",
                difficulty: "medium", source_page: 520
            },
            {
                question: "The average age of a family of 5 members is 20 years. If the youngest member is 4 years old, what was the average age of the *other 4 members* 4 years ago?",
                options: ["20 years", "22 years", "24 years", "25 years"],
                answer: 0,
                explanation: "Total current age = 5 * 20 = 100 years. Current age of the other 4 members = 100 - 4 = 96 years. 4 years ago, the sum of ages of these 4 members = 96 - (4 * 4) = 96 - 16 = 80 years. Average age of these 4 members 4 years ago = 80 / 4 = 20 years.",
                difficulty: "medium", source_page: 519
            }
        ];

        // Shuffle questions and assign "special question"
        let quizQuestions = [];
        let specialQuestionIndex = -1;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function initializeQuizQuestions() {
            // Create a copy to work with
            let tempQuestions = [...allQuizQuestions];
            tempQuestions = shuffleArray(tempQuestions); // Shuffle the entire pool first

            const easyQuestions = [];
            const mediumQuestions = [];
            const toughQuestions = [];

            // Distribute questions based on their 'difficulty' property
            tempQuestions.forEach(q => {
                if (q.difficulty === 'easy' && easyQuestions.length < 10) {
                    easyQuestions.push(q);
                } else if (q.difficulty === 'medium' && mediumQuestions.length < 50) {
                    mediumQuestions.push(q);
                } else if (q.difficulty === 'tough' && toughQuestions.length < 40) {
                    toughQuestions.push(q);
                }
            });

            // If any category is short, fill from other categories, prioritizing the specified counts
            let remainingQuestions = tempQuestions.filter(q =>
                !easyQuestions.includes(q) && !mediumQuestions.includes(q) && !toughQuestions.includes(q)
            );
            remainingQuestions = shuffleArray(remainingQuestions);

            while (easyQuestions.length < 10 && remainingQuestions.length > 0) {
                easyQuestions.push(remainingQuestions.pop());
            }
            while (mediumQuestions.length < 50 && remainingQuestions.length > 0) {
                mediumQuestions.push(remainingQuestions.pop());
            }
            while (toughQuestions.length < 40 && remainingQuestions.length > 0) {
                toughQuestions.push(remainingQuestions.pop());
            }

            // Combine and shuffle the final set of 100 questions
            quizQuestions = shuffleArray([...easyQuestions, ...mediumQuestions, ...toughQuestions]);

            // Ensure exactly 100 questions (trim if necessary, though with 100 in pool, it should be exact)
            quizQuestions = quizQuestions.slice(0, 100);

            if (quizQuestions.length !== 100) {
                showModal("Error: Could not generate exactly 100 unique questions. Please refresh.", "alert");
                return;
            }

            // Randomly select one "Today's Special Question" if it's the current date
            const today = new Date();
            const quizDate = new Date(today.getFullYear(), today.getMonth(), today.getDate()); // Normalize to start of day
            const storedQuizDate = localStorage.getItem('quiz_date');

            if (!storedQuizDate || new Date(storedQuizDate).toDateString() !== quizDate.toDateString()) {
                // New day or no stored date, generate new special question and store date
                specialQuestionIndex = Math.floor(Math.random() * quizQuestions.length);
                localStorage.setItem('special_question_index', specialQuestionIndex);
                localStorage.setItem('quiz_date', quizDate.toISOString());
            } else {
                // Same day, retrieve stored special question
                specialQuestionIndex = parseInt(localStorage.getItem('special_question_index'));
            }

            // Mark the special question
            if (quizQuestions[specialQuestionIndex]) {
                quizQuestions[specialQuestionIndex].isSpecial = true;
            }
        }


        // DOM Elements
        const loginPage = document.getElementById('login-page');
        const candidateInfoPage = document.getElementById('candidate-info-page');
        const quizPage = document.getElementById('quiz-page');
        const resultsPage = document.getElementById('results-page');

        const loginButton = document.getElementById('login-button');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const loginError = document.getElementById('login-error');

        const fullNameInput = document.getElementById('full-name');
        const startQuizButton = document.getElementById('start-quiz-button');
        const nameError = document.getElementById('name-error');

        const liveDateSpan = document.querySelector('#live-date span');
        const quizDateTitleSpan = document.getElementById('quiz-date-title');
        const updatedDateSpan = document.getElementById('updated-date');
        const timerSpan = document.getElementById('timer');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');

        const questionNumberSpan = document.getElementById('question-number');
        const questionTextSpan = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const explanationContainer = document.getElementById('explanation-container');
        const explanationText = document.getElementById('explanation-text');
        const questionCard = document.getElementById('question-card');

        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');

        const resultNameSpan = document.getElementById('result-name');
        const resultScoreSpan = document.getElementById('result-score');
        const resultTimeSpan = document.getElementById('result-time');
        const resultAttemptedSpan = document.getElementById('result-attempted');
        const retakeQuizButton = document.getElementById('retake-quiz-button');

        // Functions
        function updateLiveDate() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const formattedDate = now.toLocaleDateString('en-US', options);
            liveDateSpan.textContent = formattedDate;
            quizDateTitleSpan.textContent = formattedDate;
            updatedDateSpan.textContent = formattedDate;
        }

        function startTimer() {
            quizStartTime = Date.now();
            timerInterval = setInterval(() => {
                timeElapsed++;
                const remainingSeconds = quizDuration - timeElapsed;

                if (remainingSeconds <= 0) {
                    clearInterval(timerInterval);
                    timerSpan.textContent = "00:00";
                    if (!quizCompleted) {
                        showModal("Time's up! Your quiz will be submitted.", "alert", submitQuiz);
                    }
                } else {
                    const minutes = Math.floor(remainingSeconds / 60);
                    const seconds = remainingSeconds % 60;
                    timerSpan.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }
            }, 1000);
        }

        function updateProgressBar() {
            const progress = (currentQuestionIndex / quizQuestions.length) * 100;
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `${Math.round(progress)}%`;
        }

        function loadQuestion(index) {
            if (index >= 0 && index < quizQuestions.length) {
                currentQuestionIndex = index;
                const question = quizQuestions[currentQuestionIndex];

                // Update question card styling for special question
                questionCard.style.border = question.isSpecial && isCurrentDate() ? '4px solid #FFD700' : '1px solid #FFF5EE';

                questionNumberSpan.textContent = currentQuestionIndex + 1;
                questionTextSpan.textContent = question.question;
                optionsContainer.innerHTML = ''; // Clear previous options
                explanationContainer.classList.add('hidden'); // Hide explanation by default
                explanationText.textContent = '';

                // Shuffle options for the current question
                const shuffledOptions = shuffleArray([...question.options]);
                question.shuffledOptions = shuffledOptions; // Store shuffled order

                shuffledOptions.forEach((option, i) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.classList.add('option-card', 'p-3', 'rounded-lg', 'shadow-md', 'cursor-pointer', 'bg-white', 'hover:bg-gray-50', 'text-primary', 'font-medium', 'border', 'border-gray-200');
                    optionDiv.textContent = option;
                    optionDiv.dataset.optionIndex = question.options.indexOf(option); // Store original index
                    optionDiv.addEventListener('click', () => selectOption(optionDiv, question.answer));
                    optionsContainer.appendChild(optionDiv);

                    // Restore previous selection if exists
                    if (userAnswers[currentQuestionIndex] !== undefined && userAnswers[currentQuestionIndex] == optionDiv.dataset.optionIndex) {
                        optionDiv.classList.add('bg-blue-200', 'border-blue-500'); // Highlight selected
                    }
                });

                updateNavigationButtons();
                updateProgressBar();
            }
        }

        function selectOption(selectedDiv, correctAnswerOriginalIndex) {
            // Prevent multiple selections for the same question
            if (userAnswers[currentQuestionIndex] !== undefined) {
                return;
            }

            const selectedOptionOriginalIndex = parseInt(selectedDiv.dataset.optionIndex);
            userAnswers[currentQuestionIndex] = selectedOptionOriginalIndex; // Store the selected answer

            questionsAttempted++; // Increment attempted count

            // Disable all options after selection
            Array.from(optionsContainer.children).forEach(option => {
                option.style.pointerEvents = 'none';
                option.classList.remove('hover:bg-gray-50'); // Remove hover effect
                option.classList.remove('hover:scale-105'); // Remove hover scale
            });

            // Check answer and apply effects
            if (selectedOptionOriginalIndex === correctAnswerOriginalIndex) {
                selectedDiv.classList.add('pulse-green', 'bg-green-200', 'border-green-500');
                score++;
            } else {
                selectedDiv.classList.add('shake-red', 'bg-red-200', 'border-red-500');
                // Highlight correct answer
                Array.from(optionsContainer.children).forEach(option => {
                    if (parseInt(option.dataset.optionIndex) === correctAnswerOriginalIndex) {
                        option.classList.add('bg-green-200', 'border-green-500');
                    }
                });
            }

            // Show explanation
            explanationText.textContent = quizQuestions[currentQuestionIndex].explanation;
            explanationContainer.classList.remove('hidden');
        }

        function updateNavigationButtons() {
            prevButton.disabled = currentQuestionIndex === 0;
            prevButton.classList.toggle('opacity-50', currentQuestionIndex === 0);
            prevButton.classList.toggle('cursor-not-allowed', currentQuestionIndex === 0);
            prevButton.classList.toggle('cursor-pointer', currentQuestionIndex !== 0);

            if (currentQuestionIndex === quizQuestions.length - 1) {
                nextButton.textContent = 'Submit Quiz';
            } else {
                nextButton.textContent = 'Next';
            }
        }

        function navigateQuestions(direction) {
            if (direction === 'next') {
                if (currentQuestionIndex < quizQuestions.length - 1) {
                    currentQuestionIndex++;
                    loadQuestion(currentQuestionIndex);
                } else {
                    // Last question, submit quiz
                    if (!quizCompleted) {
                        showModal("Are you sure you want to submit the quiz?", "confirm", (confirmed) => {
                            if (confirmed) {
                                submitQuiz();
                            }
                        });
                    }
                }
            } else if (direction === 'prev') {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    loadQuestion(currentQuestionIndex);
                }
            }
        }

        function submitQuiz() {
            quizCompleted = true;
            clearInterval(timerInterval); // Stop the timer

            // Calculate final time taken
            const finalTimeSeconds = timeElapsed;
            const finalMinutes = Math.floor(finalTimeSeconds / 60);
            const finalSeconds = finalTimeSeconds % 60;
            const formattedFinalTime = `${finalMinutes.toString().padStart(2, '0')}:${finalSeconds.toString().padStart(2, '0')}`;

            // Display results
            resultNameSpan.textContent = userName;
            resultScoreSpan.textContent = score;
            resultTimeSpan.textContent = formattedFinalTime;
            resultAttemptedSpan.textContent = questionsAttempted;

            quizPage.classList.add('hidden');
            resultsPage.classList.remove('hidden');

            // Auto-submit to Formspree
            const formData = new FormData();
            formData.append('Full Name', userName);
            formData.append('Total Score', `${score} / 100`);
            formData.append('Time Taken', formattedFinalTime);
            formData.append('Questions Attempted', questionsAttempted);

            fetch('https://formspree.io/f/xwpvddea', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    console.log('Quiz results submitted successfully!');
                } else {
                    console.error('Failed to submit quiz results.');
                }
            }).catch(error => {
                console.error('Error submitting quiz results:', error);
            });
        }

        function resetQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            questionsAttempted = 0;
            timeElapsed = 0;
            userName = '';
            quizCompleted = false;
            Object.keys(userAnswers).forEach(key => delete userAnswers[key]); // Clear answers
            clearInterval(timerInterval);
            timerSpan.textContent = "40:00"; // Reset timer display
            progressBar.style.width = '0%';
            progressText.textContent = '0%';
            loginPage.classList.remove('hidden');
            resultsPage.classList.add('hidden');
            candidateInfoPage.classList.add('hidden');
            quizPage.classList.add('hidden');
            usernameInput.value = '';
            passwordInput.value = '';
            fullNameInput.value = '';
            loginError.classList.add('hidden');
            nameError.classList.add('hidden');
            initializeQuizQuestions(); // Re-initialize questions for a new session
        }

        function isCurrentDate() {
            const today = new Date();
            const quizDate = new Date(today.getFullYear(), today.getMonth(), today.getDate());
            const storedQuizDate = localStorage.getItem('quiz_date');
            return storedQuizDate && new Date(storedQuizDate).toDateString() === quizDate.toDateString();
        }

        // Event Listeners
        loginButton.addEventListener('click', () => {
            const username = usernameInput.value;
            const password = passwordInput.value;

            // Updated login credentials for May 28
            if (username === '28MAY' && password === 'free') {
                loginPage.classList.add('hidden');
                candidateInfoPage.classList.remove('hidden');
                loginError.classList.add('hidden');
            } else {
                loginError.classList.remove('hidden');
            }
        });

        startQuizButton.addEventListener('click', () => {
            const enteredName = fullNameInput.value.trim();
            if (enteredName) {
                userName = enteredName;
                candidateInfoPage.classList.add('hidden');
                quizPage.classList.remove('hidden');
                nameError.classList.add('hidden');
                startTimer();
                loadQuestion(currentQuestionIndex);
            } else {
                nameError.classList.remove('hidden');
            }
        });

        nextButton.addEventListener('click', () => navigateQuestions('next'));
        prevButton.addEventListener('click', () => navigateQuestions('prev'));
        retakeQuizButton.addEventListener('click', resetQuiz);

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            updateLiveDate();
            initializeQuizQuestions(); // Generate and shuffle questions once
        });

        // Handle mobile sticky date position
        window.addEventListener('resize', () => {
            const liveDateElement = document.getElementById('live-date');
            if (window.innerWidth < 768) {
                liveDateElement.classList.remove('justify-end');
                liveDateElement.classList.add('justify-start');
            } else {
                liveDateElement.classList.remove('justify-start');
                liveDateElement.classList.add('justify-end');
            }
        });
        // Initial call to set correct sticky date position on load
        window.dispatchEvent(new Event('resize'));

    </script>
</body>
</html>
